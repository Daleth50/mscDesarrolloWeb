{% extends "base.html" %}

{% block title %}Editar producto{% endblock %}

{% block content %}
<section class="bg-white border border-slate-200 rounded-lg p-6 max-w-2xl">
  <h2 class="text-2xl font-semibold mb-4">Editar producto</h2>

  <form action="{{ url_for('main.edit_product', product_id=product_id) }}" method="post">
    <script id="new-product-initial-data" type="application/json">
      {{ {
        "categories": categories or [],
        "form_data": form_data or {},
        "mode": "edit",
        "submit_label": "Guardar cambios",
        "cancel_url": url_for('main.product_detail', product_id=product_id)
      } | tojson }}
    </script>
    <div id="new-product-form">
      <div class="loader"></div>
    </div>
  </form>

  {% if error %}
    <p class="text-red-600 mt-4">{{ error }}</p>
  {% endif %}
</section>
{% endblock %}

{% block scripts %}
  <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@latest",
        "react-dom": "https://esm.sh/react-dom@latest",
        "react-dom/client": "https://esm.sh/react-dom@latest/client",
        "react/jsx-runtime": "https://esm.sh/react@latest/jsx-runtime",
        "@mui/material": "https://esm.sh/@mui/material@latest?external=react,react-dom"
      }
    }
  </script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script
    type="text/babel"
    data-type="module"
    src="{{ url_for('static', filename='js/components/products/product-form.js') }}"
  ></script>
{% endblock %}