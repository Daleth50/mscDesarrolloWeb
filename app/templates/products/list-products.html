{% extends "base.html" %}

{% block title %}Productos{% endblock %}

{% block content %}
<section class="bg-white border border-slate-200 rounded-lg p-6">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-semibold">Productos</h2>
    <a class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700" href="{{ url_for('main.new_product') }}">Crear producto</a>
  </div>

  <div class="overflow-x-auto">
    <table class="min-w-full border border-slate-200 text-sm">
      <thead class="bg-slate-100">
        <tr>
          <th class="px-4 py-2 text-left border-b border-slate-200">ID</th>
          <th class="px-4 py-2 text-left border-b border-slate-200">Nombre</th>
          <th class="px-4 py-2 text-left border-b border-slate-200">Precio</th>
          <th class="px-4 py-2 text-left border-b border-slate-200">Stock</th>
          <th class="px-4 py-2 text-left border-b border-slate-200">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr class="hover:bg-slate-50">
            <td class="px-4 py-2 border-b border-slate-200">{{ product.id }}</td>
            <td class="px-4 py-2 border-b border-slate-200">{{ product.name }}</td>
            <td class="px-4 py-2 border-b border-slate-200">{{ product.price }}</td>
            <td class="px-4 py-2 border-b border-slate-200">{{ product.stock_quantity }}</td>
            <td class="px-4 py-2 border-b border-slate-200">
              <div class="flex items-center gap-3">
                <a class="text-blue-600 hover:text-blue-700 hover:underline" href="{{ url_for('main.product_detail', product_id=product.id) }}">Ver</a>
                <a class="text-amber-600 hover:text-amber-700 hover:underline" href="{{ url_for('main.edit_product', product_id=product.id) }}">Editar</a>
                <form action="{{ url_for('main.delete_product', product_id=product.id) }}" method="post" onsubmit="return confirm('¿Eliminar este producto?');">
                  <button class="text-red-600 hover:text-red-700 hover:underline" type="submit">Eliminar</button>
                </form>
              </div>
            </td>
          </tr>
        {% else %}
          <tr>
            <td class="px-4 py-4 text-slate-500" colspan="5">No hay productos aún.</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
{% endblock %}